class s{constructor(e,t,i){this.key=e,this.name=this.normalize(t).substring(0,25),this.city=this.normalize(i).substring(0,15)}normalize(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase()}formatField(e,t){const i=t.toString(),r=i.length.toString().padStart(2,"0");return`${e}${r}${i}`}generatePayload(e){const t=e.toFixed(2);let i=[this.formatField("00","01"),this.formatField("26",[this.formatField("00","br.gov.bcb.pix"),this.formatField("01",this.key)].join("")),this.formatField("52","0000"),this.formatField("53","986"),this.formatField("54",t),this.formatField("58","BR"),this.formatField("59",this.name),this.formatField("60",this.city),this.formatField("62",this.formatField("05","***"))].join("");i+="6304";const r=this.computeCRC(i);return i+r}computeCRC(e){let t=65535;for(let i=0;i<e.length;i++){t^=e.charCodeAt(i)<<8;for(let r=0;r<8;r++)(t&32768)!==0?t=t<<1^4129:t=t<<1}return(t&65535).toString(16).toUpperCase().padStart(4,"0")}}export{s as PixHelper};
